---
title: "DATA 624 - Project 2"
author: "Zach Herold, Anthony Pagan, Betsy Rosalen"
date: "April 21, 2020"
output:
  #ioslides_presentation:
    #Shighlight: tango
  slidy_presentation:
    css: ./slides.css
    highlight: tango
editor_options: 
  chunk_output_type: inline
---

```{r setup, include=FALSE, echo=FALSE}
knitr::opts_chunk$set(echo = FALSE)
#include essential packages and code for presentation, if needed
```

## Data Analytics of ABC Beverage Manufacturing Process

This report has the following aims:

* to further senior management's general understanding of the ABC Beverage manufacturing process from a data analytics perspective;
* to internally prepare for inquiries and procedures pursuant to recent changes in the regulatory environment;
* specifically, to explicate the effect manufacturing processes have on beverage pH and a generalized model for predicting pH levels from input and process calibrations. 

## Brand Overview

There are four brands of beverages.

(Additional Content TBC)


## Production Process Overview

We has isolated the following manufacturing processes:


## Correlation between Production Metrics

We observe strong positive correlation between the following pairs:
(fill in)

We observe strong negative correlation between the following pairs:
(fill in)


## A Predictive Model for pH

We seek to consult a model that minimized error (measured as root mean squared error or RMSE) and maximized predictive value (measured as R-squared).

The Random Forest model achieved this. The Random Forest regression model is a machine learning technique that randomly leaves out candidate features from each decision tree split, run on multiple iterations. In doing so, it "decorrelates" the trees, such that the averaging process can reduce the variance of the resulting models. 

Our result was 
RMSE: 0.11550844 
RSQUARED: 0.59451507
(confirm)

## Sample Tree

(include Rpart Tree)

```{r}
#INSERT AS IMAGE
#install.packages('rpart.plot')
# library(rpart.plot)
# tree <- rpart(PH~., data=traindata)
# prp(tree)
```


## Most Important Processes in pH Determination

We rank the top-ten most important variables in determining pH according to the Random Forest Model.

```{r}
#INSERT AS IMAGE
#Variable Importance Ranking (Random Forest)
#rfImp <- varImp(rforest, scale = FALSE)
#plot(rfImp, top=15, scales = list(y = list(cex = 0.8)))
```

Of these, the variables with a confirmed positive influence on pH are:

The ones with a confirmed negative influence on pH are:

## Comparison to standard OLS linear regression

When we compare the RMSE and RSQUARED of the a conventional linear regression model that uses takes these ten variables as input to one which uses all the variables as inputs, we note a loss of:

(TBC)


## Understanding Mnf.Flow (1)

We visualize the distribution of the Mnf.Flow data in a histogram

```{r, echo=FALSE, fig.cap="A caption", out.width = '100%'}
knitr::include_graphics("Mnf.Flow_hist.png")
```

We visualize the relationship between between Mnf.Flow and PH

```{r, echo=FALSE, fig.cap="A caption", out.width = '100%'}
knitr::include_graphics("Mnf.Flow.png")
```

## Understanding Mnf.Flow (2)

We make the following observations about the Mnf.Flow variable:

* (1) Of the 2567 observations in our training set, 1183 (46%) have a value of -100 or less.

The negative influence is apparent in this violinplot, separated by buckets of Mnf.FLow in the following ranges {1: [-1000, -1), 2: [-1, 1), 3: [1, 140), 4: [140, 1000]}

```{r, echo=FALSE, fig.cap="A caption", out.width = '100%'}
knitr::include_graphics("Violinplot.png")
```

## Understanding Mnf.Flow (3)

* (2) We note that the mean value of all non-negative Mnf.Flow data is 140. 

* (3) A disproporational number of our missing values come from observations in which the Mnf.Flow is between 0 and 1. Although only 3% of all observations have this range of Mnf.Flow, 18% of the observations with missing values come from this subset. 

## Most Important Variable by Brand (1)

We further separate the data by brands, 
[provide table with relative frequencies of each brand]

We list the top-five most important variables according to brand type:
A:
B:
C:
D:
NA: 

## Most Important Variable by Brand (2)

We notice the following consistencies and discrepancies between the brand-specific models and the general model:

## Predictions

See attached Excel file for predictions of pH applying our Random Forest model. 

## Suggestions for improving Data Collection

* Completeness
* 

## Conclusions


